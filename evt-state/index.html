<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Event Managed States - Event Driven Architecture</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Event Managed States";
    var mkdocs_page_input_path = "evt-state\\README.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Event Driven Architecture</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../concepts/">Concepts</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Architecture</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../architecture/">Reference diagrams</a>
                </li>
                <li class="">
                    
    <a class="" href="../evt-src/">Event Sources</a>
                </li>
                <li class="">
                    
    <a class="" href="../evt-backbone/">Event Backbone</a>
                </li>
                <li class="">
                    
    <a class="" href="../evt-action/">Event Actions</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Event Managed States</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#event-managed-state">Event managed state</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#event-sourcing">Event sourcing</a></li>
        
            <li><a class="toctree-l4" href="#command-query-responsibility-segregation-cqrs">Command Query Responsibility Segregation (CQRS)</a></li>
        
            <li><a class="toctree-l4" href="#event-sourcing-cqrs-and-microservices">Event sourcing, CQRS and microservices</a></li>
        
            <li><a class="toctree-l4" href="#fearther-readings">Fearther readings</a></li>
        
            <li><a class="toctree-l4" href="#supporting-products">Supporting Products</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/arch/">Event Stream - Kafka architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="https://ibm-cloud-architecture.github.io/refarch-data-ai-analytics/preparation/data-replication/">Data Replication Pattern</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Event Storming</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../methodology/readme/">Event Storming Workshop</a>
                </li>
                <li class="">
                    
    <a class="" href="https://ibm-cloud-architecture.github.io/refarch-kc/analysis/readme/">Applied to Container Shipment Analysis</a>
                </li>
                <li class="">
                    
    <a class="" href="../methodology/ddd/">Domain driven design</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Event driven patterns</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../evt-microservices/">Microservices</a>
                </li>
                <li class="">
                    
    <a class="" href="../evt-microservices/ED-patterns/">Event-driven patterns</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/kafka-stream/">Event streaming processing</a>
                </li>
                <li class="">
                    
    <a class="" href="https://ibm-cloud-architecture.github.io/refarch-data-ai-analytics/preparation/data-replication/">Data Replication Pattern</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rt-analytics/">Real time analytics</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reference implementations</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="https://ibm-cloud-architecture.github.io/refarch-kc">Container shipment implementation solution</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Product guidances</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../kafka/arch/">Kafka architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/readme/">Kafka concepts summary</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/producers/">Kafka producer</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/consumers/">Kafka consumer</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/FAQ/">Kafka FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployments/kafka/">Kafka deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployments/zookeeper/">Zookeeper deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployments/eventstreams/Install_Ceph_on_ICP/">Ceph deployment on ICP</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployments/eventstreams/">Event Streams ICP deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../kafka/monitoring/">Kafka Monitoring</a>
                </li>
                <li class="">
                    
    <a class="" href="../serverless/">Serverless</a>
                </li>
                <li class="">
                    
    <a class="" href="../deployments/postgresql/">Postgresql</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../eda-skill-journey/">Skill Journey</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../compendium/">Compendium</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Event Driven Architecture</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Architecture &raquo;</li>
        
      
    
    <li>Event Managed States</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ibm-cloud-architecture/refarch-eda/edit/master/docs/evt-state/README.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="event-managed-state">Event managed state</h1>
<p>While the prime focus for an event-driven architecture is processing events, in certain cases you need to persist events for post processing and queries by other applications. The event backbone has a built-in event log that can be used to store and reply to events that are published to the backbone. However, considering the full scope of event-driven solutions, other use cases and types of store can be supported:</p>
<ul>
<li>Event stores optimized for analytics.</li>
<li>Event sourcing as a pattern for recording state changes and updates across distributed systems.</li>
<li>Command Query Response Separation (CQRS) as an optimization that separates updates and reads across different stores.</li>
</ul>
<h2 id="event-sourcing">Event sourcing</h2>
<p>When the state of a system changes, an application issues a notification event of the state change. We are detailing this pattern <a href="../evt-microservices/ED-patterns/">here &gt;&gt;</a> </p>
<h2 id="command-query-responsibility-segregation-cqrs">Command Query Responsibility Segregation (CQRS)</h2>
<p>The event log leads to more work to support business query as it requires converting the events into the application state suitable to the query.</p>
<p>We are detailing this pattern <a href="../evt-microservices/ED-patterns/">here &gt;&gt;</a> </p>
<p>See the following <a href="https://github.com/ibm-cloud-architecture/refarch-kc-order-ms">order management project</a> for a detail explanation and implementation of the CQRS and event sourcing patterns.</p>
<h2 id="event-sourcing-cqrs-and-microservices">Event sourcing, CQRS and microservices</h2>
<p>With the adoption of microservices you have explicitly separated state, so that a microservice is bounded with its own state. Further, with the use of event sourcing, you create a history log that is not easy to query. The challenge now comes when you need to implement a query that requires a joining of data from multiple services.
There are multiple choices to address service orchestration: API composition or the CQRS pattern. For API composition the query is supported by an operation which integrate with all other microservices and may do some data transformation to combine the results. With this pattern you need to assess for aggregation requirements as they may dramatically impact performance. You may need to assess where to put this API composition component. It can be an API gateway or part of a BFF or even its own microservices.
The other answer is to implement a CQRS pattern where state changes are published as events by multiple related business objects. Each change is persisted in the event log or event store, and a higher level operation subscribes to each event and persists the data in a queryable data store.</p>
<h2 id="fearther-readings">Fearther readings</h2>
<p>Read more on this pattern at https://microservices.io/patterns/data/cqrs.html and our <a href="https://github.com/ibm-cloud-architecture/refarch-kc-order-ms">reference implementation</a></p>
<h2 id="supporting-products">Supporting Products</h2>
<ul>
<li><a href="https://console.bluemix.net/catalog/services/event-streams">IBM Event Streams Public Cloud</a></li>
<li><a href="https://www.ibm.com/cloud/event-streams">IBM Event Streams Private Cloud</a></li>
<li><a href="https://www.ibm.com/products/db2-event-store">IBM Db2 Event store</a></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../kafka/arch/" class="btn btn-neutral float-right" title="Event Stream - Kafka architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../evt-action/" class="btn btn-neutral" title="Event Actions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ibm-cloud-architecture/refarch-eda/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../evt-action/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../kafka/arch/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
